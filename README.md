# üìö CI/CD Pipeline Release Management System
## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
4. [–ü—Ä–æ—Ü–µ—Å—Å—ã –∏ workflow](#–ø—Ä–æ—Ü–µ—Å—Å—ã-–∏-workflow)
5. [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)
6. [Telegram Bot –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å](#telegram-bot-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
8. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [Troubleshooting](#troubleshooting)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –ß—Ç–æ —ç—Ç–æ?

**Release Management System** - —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–∏–∑–∞–º–∏, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
- üß™ –ü–æ–¥–¥–µ—Ä–∂–∫—É —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º
- ‚è™ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–∞—Ç–∞ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏
- üìä –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —á–µ—Ä–µ–∑ Telegram Bot
- üìù –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º  
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  
‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ø–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ Telegram  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         GitHub Repository                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ Work Branch  ‚îÇ  ‚îÇ  Version Tag  ‚îÇ  ‚îÇ Main Branch  ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ         ‚îÇ                  ‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                  ‚îÇ
          ‚ñº                  ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Dev    ‚îÇ      ‚îÇ GitHub Action‚îÇ
    ‚îÇ  Server  ‚îÇ      ‚îÇ   Workflow   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ   Release API       ‚îÇ
                  ‚îÇ  (FastAPI Server)   ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚ñº                       ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇStage Server  ‚îÇ      ‚îÇ  PostgreSQL  ‚îÇ
        ‚îÇ   (Test)     ‚îÇ      ‚îÇ   Database   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ                       ‚ñ≤
               ‚ñº                       ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
        ‚îÇ Manual Test  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ (Telegram)   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ Production   ‚îÇ
        ‚îÇ   Server     ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û–∫—Ä—É–∂–µ–Ω–∏—è (Environments)

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è | –î–æ—Å—Ç—É–ø |
|-----------|------------|---------------|---------|
| **Dev** | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | Push –≤ –≤–µ—Ç–∫—É | –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ |
| **Stage** | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ | QA –∫–æ–º–∞–Ω–¥–∞ |
| **Production** | –ë–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä | –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π |

---

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. GitHub Actions Workflows

#### üìÅ `on-push-in-work-branch.yaml.yml`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ dev-—Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ push –≤ —Ä–∞–±–æ—á—É—é –≤–µ—Ç–∫—É

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- Push –≤ –ª—é–±—É—é –≤–µ—Ç–∫—É, –∫—Ä–æ–º–µ main/master/develop

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∞ –∫–æ–º–º–∏—Ç–∞
2. –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π dev-—Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
3. –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç health-check
5. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram

#### üìÅ `on-create-version-tag.yaml.yml`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ stage –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ —Ñ–æ—Ä–º–∞—Ç–∞ `v*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, v1.0.0)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –æ —Ä–µ–ª–∏–∑–µ –≤ –ë–î
2. –û–±–Ω–æ–≤–ª—è–µ—Ç stage-—Å–µ—Ä–≤–µ—Ä –¥–æ –≤–µ—Ä—Å–∏–∏ —Ç–µ–≥–∞
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
4. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Ä–µ–ª–∏–∑ –≤ —Å—Ç–∞—Ç—É—Å "–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"
5. –£–≤–µ–¥–æ–º–ª—è–µ—Ç QA –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ Telegram Bot

#### üìÅ `on-approve-manual-testing.yaml.yml`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ production –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –≤ Telegram Bot

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ production
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç health-check
4. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ä–µ–ª–∏–∑–∞
5. –õ–æ–≥–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å

### 2. Release API Server

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** FastAPI, PostgreSQL, AsyncPG

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:**

```python
POST   /api/tg-bot/release        # –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–ª–∏–∑–∞
PATCH  /api/tg-bot/release        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–ª–∏–∑–∞
POST   /api/tg-bot/update          # Webhook –¥–ª—è Telegram
GET    /api/tg-bot/health          # Health check
```

### 3. Telegram Bot

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤
- ‚úÖ –û–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤
- ‚è™ –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –æ—Ç–∫–∞—Ç–æ–≤
- üìà –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–ª–∏–∑–æ–≤

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `releases`:**

```sql
CREATE TABLE releases (
    id SERIAL PRIMARY KEY,
    service_name TEXT NOT NULL,
    release_tag TEXT NOT NULL,
    rollback_to_tag TEXT DEFAULT '',
    status TEXT NOT NULL,
    initiated_by TEXT NOT NULL,
    github_run_id TEXT NOT NULL,
    github_action_link TEXT NOT NULL,
    github_ref TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP NULL
);
```

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ Workflow

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ä–µ–ª–∏–∑–∞

```mermaid
stateDiagram-v2
    [*] --> Initiated: –°–æ–∑–¥–∞–Ω —Ç–µ–≥
    Initiated --> Building: –ù–∞—á–∞–ª–æ —Å–±–æ—Ä–∫–∏
    Building --> Stage_Deploy: –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞
    Building --> Staging_Failed: –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏
    Stage_Deploy --> Manual_Testing: –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ stage
    Manual_Testing --> Manual_Test_Passed: QA –æ–¥–æ–±—Ä–∏–ª
    Manual_Testing --> Manual_Test_Failed: QA –æ—Ç–∫–ª–æ–Ω–∏–ª
    Manual_Test_Passed --> Deploying: –ù–∞—á–∞—Ç –¥–µ–ø–ª–æ–π –Ω–∞ prod
    Deploying --> Deployed: –£—Å–ø–µ—à–Ω—ã–π –¥–µ–ø–ª–æ–π
    Deploying --> Production_Failed: –û—à–∏–±–∫–∞ –¥–µ–ø–ª–æ—è
    Deployed --> Rollback: –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω –æ—Ç–∫–∞—Ç
    Rollback --> Rollback_Done: –û—Ç–∫–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω
    Rollback --> Rollback_Failed: –û—à–∏–±–∫–∞ –æ—Ç–∫–∞—Ç–∞
    Staging_Failed --> [*]
    Manual_Test_Failed --> [*]
    Production_Failed --> [*]
    Deployed --> [*]
    Rollback_Done --> [*]
```

### –°—Ç–∞—Ç—É—Å—ã —Ä–µ–ª–∏–∑–∞

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è |
|--------|----------|-------------------|
| `initiated` | –†–µ–ª–∏–∑ —Å–æ–∑–¥–∞–Ω | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ |
| `building` | –ò–¥–µ—Ç —Å–±–æ—Ä–∫–∞ | –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ |
| `staging_failed` | –û—à–∏–±–∫–∞ –Ω–∞ stage | –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| `manual_testing` | –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é | QA –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| `manual_test_passed` | –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã | –î–µ–ø–ª–æ–π –Ω–∞ production |
| `manual_test_failed` | –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ–π–¥–µ–Ω—ã | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑ |
| `deploying` | –î–µ–ø–ª–æ–π –Ω–∞ production | –û–∂–∏–¥–∞–Ω–∏–µ |
| `deployed` | –£—Å–ø–µ—à–Ω–æ –≤ production | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| `production_failed` | –û—à–∏–±–∫–∞ production | –û—Ç–∫–∞—Ç –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| `rollback` | –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—Ç–∫–∞—Ç | –û–∂–∏–¥–∞–Ω–∏–µ |
| `rollback_done` | –û—Ç–∫–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω | –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã |

---

## üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

#### 1. –†–∞–±–æ—Ç–∞ —Å feature-–≤–µ—Ç–∫–æ–π

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ç–∫–∏
git checkout -b feature/new-feature

# –í–Ω–µ—Å–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
git add .
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª"

# Push –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ dev)
git push origin feature/new-feature
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç—Å—è –Ω–∞ –≤–∞—à–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º dev-—Å–µ—Ä–≤–µ—Ä–µ

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ main
git checkout main
git pull origin main

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ –≤–µ—Ä—Å–∏–∏
git tag v1.2.3 -m "Release v1.2.3: –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–≥–∞
git push origin v1.2.3
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ stage –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ QA –∫–æ–º–∞–Ω–¥—ã

### –î–ª—è QA –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–≥–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram Bot:

```
üöÄ –ù–æ–≤—ã–π —Ä–µ–ª–∏–∑ –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
üì¶ –°–µ—Ä–≤–∏—Å: loom-content
üè∑Ô∏è –í–µ—Ä—Å–∏—è: v1.2.3
üë§ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä: developer_name
üîó GitHub Action: [—Å—Å—ã–ª–∫–∞]
```

#### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram Bot –∫–æ–º–∞–Ω–¥–æ–π `/start`
2. –í—ã–±–µ—Ä–∏—Ç–µ "üöÄ –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–ª–∏–∑—ã"
3. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–µ–ª–∏–∑
4. –ü—Ä–æ–≤–µ–¥–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ stage-—Å–µ—Ä–≤–µ—Ä–µ

#### 3. –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è

**–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:**
- –ù–∞–∂–º–∏—Ç–µ "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
- –†–µ–ª–∏–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç—Å—è –Ω–∞ production

**–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:**
- –ù–∞–∂–º–∏—Ç–µ "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å"
- –£–≤–µ–¥–æ–º–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –î–ª—è DevOps –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–ª–∏–∑–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
tail -f /var/log/deployments/loom-content/v1.2.3.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps | grep loom-content
docker logs loom-content

# Health check
curl http://localhost:8004/api/content/health
```

#### –†—É—á–Ω–æ–π –æ—Ç–∫–∞—Ç (—ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π)

```bash
# SSH –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
ssh root@prod-server

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd loom/loom-content

# –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–≥
git checkout v1.2.2

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
cd ../loom-system
docker compose -f ./docker-compose/app.yaml up -d --build loom-content
```

---

## ü§ñ Telegram Bot –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

```
ü§ñ Release Bot

üëã –ü—Ä–∏–≤–µ—Ç, {name}!

–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–ª–∏–∑–∞–º–∏.
–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–ª–∏–∑—ã –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏.

–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:
[üöÄ –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–ª–∏–∑—ã]
[‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–ª–∏–∑—ã]
[‚ùå –ü—Ä–æ–≤–∞–ª—å–Ω—ã–µ —Ä–µ–ª–∏–∑—ã]
```

### –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–ª–∏–∑—ã

```
üöÄ –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–ª–∏–∑—ã

üì¶ loom-content
üè∑Ô∏è Tag: v1.2.3
üîÑ –°—Ç–∞—Ç—É—Å: üß™ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
üë§ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä: developer_name
üìÖ –°–æ–∑–¥–∞–Ω: 15.03.2024 14:30
üîó GitHub Action: [–û—Ç–∫—Ä—ã—Ç—å]
‚è±Ô∏è –í –æ–±—Ä–∞–±–æ—Ç–∫–µ: 15 –º–∏–Ω

[‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
[üîÑ –û–±–Ω–æ–≤–∏—Ç—å]
[‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```

### –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–ª–∏–∑—ã

```
‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–ª–∏–∑—ã

üì¶ loom-content
üè∑Ô∏è Tag: v1.2.2
üîÑ –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–¥–µ–ø–ª–æ–µ–Ω
üë§ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä: developer_name
üìÖ –°–æ–∑–¥–∞–Ω: 14.03.2024 10:00
üöÄ –ó–∞–¥–µ–ø–ª–æ–µ–Ω: 14.03.2024 10:45
üîó GitHub Action: [–û—Ç–∫—Ä—ã—Ç—å]

[‚è™ –û—Ç–∫–∞—Ç–∏—Ç—å]
[üîÑ –û–±–Ω–æ–≤–∏—Ç—å]
[‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```

### –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞—Ç–∞

```
‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–∫–∞—Ç–∞

‚ùó –í–ù–ò–ú–ê–ù–ò–ï! –í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –æ—Ç–∫–∞—Ç–∏—Ç—å —Ä–µ–ª–∏–∑!

üì¶ –°–µ—Ä–≤–∏—Å: loom-content
üè∑Ô∏è –¢–µ–∫—É—â–∏–π tag: v1.2.3
‚è™ –û—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ tag: v1.2.2
üìÖ –î–∞—Ç–∞ –¥–µ–ø–ª–æ—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏: 14.03.2024 10:45

‚ö†Ô∏è –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—Ç–∫–∞—Ç—É —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é.
‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–∫–∞—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º!

[‚úÖ –î–∞, –æ—Ç–∫–∞—Ç–∏—Ç—å] [–ù–∞–∑–∞–¥]
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### `.env.servers` (–Ω–∞ GitHub runner)

```bash
# API Configuration
LOOM_RELEASE_TG_BOT_API_URL=https://api.example.com/api/tg-bot
LOOM_INTERSERVER_SECRET_KEY=your-secret-key

# Developer servers
developer1_HOST=192.168.1.10
developer1_PASSWORD=secure-password

developer2_HOST=192.168.1.11
developer2_PASSWORD=secure-password

# Stage server
STAGE_HOST=192.168.1.20
STAGE_PASSWORD=secure-password

# Production server
PROD_HOST=192.168.1.30
PROD_PASSWORD=secure-password
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞

```python
# internal/config/config.py

class Config:
    def __init__(self):
        # Service configuration
        self.service_name = os.getenv("LOOM_RELEASE_TG_BOT_CONTAINER_NAME")
        self.http_port = os.getenv("LOOM_RELEASE_TG_BOT_PORT", "8000")
        self.prefix = os.getenv("LOOM_RELEASE_TG_BOT_PREFIX", "/api/tg-bot")
        
        # Telegram Bot
        self.release_tg_bot_token = os.environ.get('LOOM_RELEASE_TG_BOT_TOKEN')
        
        # Database
        self.db_host = os.getenv("LOOM_RELEASE_TG_BOT_POSTGRES_CONTAINER_NAME")
        self.db_name = os.getenv("LOOM_RELEASE_TG_BOT_POSTGRES_DB_NAME")
        self.db_user = os.getenv("LOOM_RELEASE_TG_BOT_POSTGRES_USER")
        self.db_pass = os.getenv("LOOM_RELEASE_TG_BOT_POSTGRES_PASSWORD")
```

### Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
version: '3.8'

services:
  loom-release-tg-bot:
    build: 
      context: ../loom-release-tg-bot
      dockerfile: .github/Dockerfile
    container_name: loom-release-tg-bot
    environment:
      - ENVIRONMENT=production
      - LOG_LEVEL=INFO
    ports:
      - "8000:8000"
    depends_on:
      - postgres
    networks:
      - loom-network
    volumes:
      - ./logs:/var/log/deployments
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/api/tg-bot/health"]
      interval: 30s
      timeout: 10s
      retries: 3
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

```
/var/log/deployments/
‚îú‚îÄ‚îÄ loom-content/
‚îÇ   ‚îú‚îÄ‚îÄ v1.2.3.log         # Stage deployment
‚îÇ   ‚îî‚îÄ‚îÄ v1.2.2.log
‚îú‚îÄ‚îÄ production/
‚îÇ   ‚îî‚îÄ‚îÄ loom-content/
‚îÇ       ‚îú‚îÄ‚îÄ v1.2.3-prod.log # Production deployment
‚îÇ       ‚îî‚îÄ‚îÄ v1.2.2-prod.log
‚îî‚îÄ‚îÄ rollback/
    ‚îî‚îÄ‚îÄ loom-content/
        ‚îî‚îÄ‚îÄ v1.2.2-rollback.log
```

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞ –¥–µ–ø–ª–æ—è

```
2024-03-15 14:30:00 - üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π —Ç–µ–≥–∞ v1.2.3
2024-03-15 14:30:01 - üì• –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Ç–µ–≥–∏
2024-03-15 14:30:02 - üîç –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: v1.2.2
2024-03-15 14:30:03 - üì• –ü–æ–ª—É—á–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2024-03-15 14:30:05 - ‚úÖ –¢–µ–≥ v1.2.3 –Ω–∞–π–¥–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
2024-03-15 14:30:06 - üè∑Ô∏è –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Ç–µ–≥ v1.2.3
2024-03-15 14:30:07 - üßπ –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –≤–µ—Ç–∫–∏
2024-03-15 14:30:08 - üî® –ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Ç–µ–≥–∞ v1.2.3...
2024-03-15 14:31:00 - üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ health (–ø–æ–ø—ã—Ç–∫–∞ 1 –∏–∑ 3)...
2024-03-15 14:31:05 - ‚úÖ Health check –ø—Ä–æ–π–¥–µ–Ω!
2024-03-15 14:31:06 - ‚úÖ –¢–µ–≥ v1.2.3 —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### –ú–µ—Ç—Ä–∏–∫–∏ (OpenTelemetry)

–°–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:

- **HTTP –º–µ—Ç—Ä–∏–∫–∏:**
  - `http.server.request.duration` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
  - `http.server.active_requests` - –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
  - `http.server.ok.request.total` - —É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
  - `http.server.error.request.total` - –æ—à–∏–±–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

- **Telegram –º–µ—Ç—Ä–∏–∫–∏:**
  - `telegram.server.ok.message.total` - –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  - `telegram.server.error.message.total` - –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - `telegram.server.message.duration` - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

## üîß Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. –¢–µ–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ùå –¢–µ–≥ v1.2.3 –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ remote
git push origin v1.2.3

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
git fetch origin --tags --force
```

#### 2. Health check –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ùå Health check –Ω–µ –ø—Ä–æ–π–¥–µ–Ω –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker logs loom-content

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
netstat -tulpn | grep 8004

# –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ health
curl -v http://localhost:8004/api/content/health
```

#### 3. –û—Ç–∫–∞—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Ç–∫–∞—Ç–∞
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
git tag -l | grep v1.2.2

# –†—É—á–Ω–æ–π –æ—Ç–∫–∞—Ç
git checkout v1.2.2
docker compose up -d --build loom-content
```

#### 4. Telegram Bot –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:**
Bot –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook
curl https://api.example.com/api/tg-bot/webhook/set

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞
docker logs loom-release-tg-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
docker restart loom-release-tg-bot
```

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps -a | grep loom

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
psql -h localhost -U postgres -d releases -c "SELECT * FROM releases ORDER BY created_at DESC LIMIT 5;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏
free -m

# –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
htop

# –°–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
ss -tulpn
```

---

## üìà Best Practices

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (v1.2.3)
   - Major.Minor.Patch

2. **–ö–æ–º–º–∏—Ç—ã:**
   - –ü–∏—à–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ conventional commits

3. **–í–µ—Ç–∫–∏:**
   - feature/* - –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á
   - bugfix/* - –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
   - hotfix/* - –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫

### –î–ª—è QA

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ–∫-–ª–∏—Å—Ç—ã

2. **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è:**
   - –ë—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–æ–≤—ã–µ —Ä–µ–ª–∏–∑—ã
   - –ß–µ—Ç–∫–æ –æ–ø–∏—Å—ã–≤–∞–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã
   - –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–π—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏

### –î–ª—è DevOps

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–∏—Å–∫–æ–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∫–ª—é—á–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
   - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ production

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Release Management System –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** - –º–∏–Ω–∏–º—É–º —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã  
‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ø–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞  
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –±—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –∏ –æ—Ç–∫–∞—Ç  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∏ —É–ª—É—á—à–∞–µ—Ç—Å—è. –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ DevOps.

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **Telegram:** @gommgo
